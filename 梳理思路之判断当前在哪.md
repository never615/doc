# 梳理思路
考虑有网没网、本地有数据没数据、支持多个商城-判断当前在哪？


* 室外定位：判断在哪个商城
* 室内定位：判断商城内的具体位置

## 判断当前在哪？（只针对一个地方设计的app不用考虑这一步）
室外定位，需要知道所在哪个商城。
定位方法：

* gps
* 基站
* 网络
* 蓝牙


1.前三种方法可以得到具体的经纬度坐标，然后和商城位置进行计算比较得出当前所在商城。使用现成的百度定位SDK得到当前所在的经纬度。

拿到经纬度后传给云端，由云端计算出最近的商城和距离，返回商城id和dist。得到结果。

2.使用蓝牙进行辅助定位，因为想实现没有网络条件下，也可以使用室内定位和室内导航，所以必须先判断当前在哪个商城，如果手机没有网且又在商城内，则根据扫描到的beacon信息和本地数据库判断当前所在商城。如果此时没网条件下本地也没有数据，则定位失败。



## 具体怎么实现
专门写一个模块来处理室外定位的逻辑，包括封装蓝牙定位所在商城的功能。

